version: 2
jobs:
  build:
    docker:
      - image: debian:stretch
    steps:
      - checkout
      - run:
          name: Greeting
          command: echo Hello, world.
  deploy-to-stg:
    docker: 
      - image: debian:stretch
    steps:
      - run: 
         name: Deploying to staging
         command: ls -l
  deploy:
    docker:
     - image: debian:stretch
    steps:
     #- checkout
     - run:
         name: Deployment Started
         command: ls -l
workflows:
 version: 2
 build-deploy:
   jobs:
    - build
    - deploy-to-stg:
       requires:
        - build
    - deploy:
       requires:
         - build
       filters:
         branches:
            only: master
